import{t as e}from"./package-B4XiGOGU.js";import{t}from"./plus-CEMkcid2.js";import{t as n}from"./search-7QJDYU_6.js";import{t as r}from"./trash-2-Eo-Zwxxt.js";import{t as i}from"./triangle-alert-CVdzsyTG.js";import{c as a,i as o,n as s,r as c,w as l,y as u}from"./index-FG9feFxU.js";var d=a(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),f=l(u(),1),p=c();function m(){let[a,c]=(0,f.useState)(``),[l,u]=(0,f.useState)([]),[m,h]=(0,f.useState)(!0),[g,_]=(0,f.useState)(null),[v,y]=(0,f.useState)(!1),[b,x]=(0,f.useState)(null),[S,C]=(0,f.useState)({sku:``,name:``,category:``,quantityOnHand:0,reorderLevel:5,costPrice:0,sellingPrice:0,description:``,image:``});(0,f.useEffect)(()=>{w()},[]);let w=async()=>{h(!0);try{let e=localStorage.getItem(`companyId`);u((await s.get(`/inventory`,{params:{companyId:e}})).data)}catch(e){console.error(`Failed to fetch inventory`,e),_(`Failed to load inventory.`)}finally{h(!1)}},T=(e=null)=>{e?(x(e._id),C({sku:e.sku,name:e.name,category:e.category||``,quantityOnHand:e.quantityOnHand,reorderLevel:e.reorderLevel,costPrice:e.costPrice||0,sellingPrice:e.sellingPrice||0,description:e.description||``,image:e.image||``})):(x(null),C({sku:``,name:``,category:``,quantityOnHand:0,reorderLevel:5,costPrice:0,sellingPrice:0,description:``,image:``})),y(!0)},E=()=>{y(!1),x(null)},D=e=>{let{name:t,value:n}=e.target;C(e=>({...e,[t]:t===`quantityOnHand`||t===`reorderLevel`||t===`costPrice`||t===`sellingPrice`?parseFloat(n)||0:n}))},O=e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onloadend=()=>{C(t=>({...t,image:e.result}))},e.readAsDataURL(t)}},k=async e=>{e.preventDefault();try{let e=localStorage.getItem(`companyId`),t={...S,companyId:e};b?await s.patch(`/inventory/${b}`,t):await s.post(`/inventory`,t),w(),E()}catch(e){console.error(`Failed to save item`,e),alert(`Failed to save item: `+(e.response?.data?.message||e.message))}},A=async e=>{if(window.confirm(`Are you sure you want to delete this item?`))try{await s.delete(`/inventory/${e}`),w()}catch(e){console.error(`Failed to delete item`,e),alert(`Failed to delete item`)}},j=e=>e.quantityOnHand<=0?`Out of Stock`:e.quantityOnHand<=e.reorderLevel?`Low Stock`:`In Stock`,M=e=>{switch(e){case`In Stock`:return`bg-green-100 text-green-800`;case`Low Stock`:return`bg-amber-100 text-amber-800`;case`Out of Stock`:return`bg-red-100 text-red-800`;default:return`bg-gray-100 text-gray-800`}};return m&&!l.length?(0,p.jsx)(`div`,{className:`p-10 text-center`,children:`Loading inventory...`}):(0,p.jsxs)(`div`,{className:`space-y-6`,children:[(0,p.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4`,children:[(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800`,children:`Inventory Management`}),(0,p.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:`Track stock levels, manage products, and restock.`})]}),(0,p.jsxs)(`button`,{onClick:()=>T(),className:`flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 shadow-sm transition-all active:scale-95`,children:[(0,p.jsx)(t,{size:18}),` Add Item`]})]}),(0,p.jsxs)(`div`,{className:`bg-amber-50 border border-amber-200 rounded-xl p-4 flex gap-3`,children:[(0,p.jsx)(i,{className:`text-amber-600 shrink-0`}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`h4`,{className:`font-semibold text-amber-800 text-sm`,children:`Low Stock Alert`}),(0,p.jsxs)(`p`,{className:`text-xs text-amber-700 mt-1`,children:[l.filter(e=>e.quantityOnHand<=e.reorderLevel).length,` items are running low on stock.`]})]})]}),(0,p.jsxs)(`div`,{className:`bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden`,children:[(0,p.jsxs)(`div`,{className:`px-6 py-4 border-b border-slate-200 flex flex-col md:flex-row justify-between gap-4`,children:[(0,p.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,p.jsx)(e,{size:20,className:`text-slate-400`}),(0,p.jsx)(`h3`,{className:`text-lg font-semibold text-slate-800`,children:`Product List`})]}),(0,p.jsx)(`div`,{className:`flex gap-2 w-full md:w-auto`,children:(0,p.jsxs)(`div`,{className:`relative flex-1 md:w-64`,children:[(0,p.jsx)(n,{className:`absolute left-3 top-2.5 h-4 w-4 text-slate-400`}),(0,p.jsx)(`input`,{type:`text`,placeholder:`Search products...`,value:a,onChange:e=>c(e.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500`})]})})]}),(0,p.jsxs)(`table`,{className:`min-w-full divide-y divide-slate-200`,children:[(0,p.jsx)(`thead`,{className:`bg-slate-50 text-xs uppercase font-semibold text-slate-500`,children:(0,p.jsxs)(`tr`,{children:[(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`SKU`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Image`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Product Name`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Category`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Stock`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Price`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-left tracking-wider`,children:`Status`}),(0,p.jsx)(`th`,{className:`px-6 py-4 text-right tracking-wider`,children:`Actions`})]})}),(0,p.jsxs)(`tbody`,{className:`divide-y divide-slate-200`,children:[l.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())).map(t=>{let n=j(t);return(0,p.jsxs)(`tr`,{className:`hover:bg-slate-50 transition-colors`,children:[(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap text-xs font-mono text-slate-500`,children:t.sku}),(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:t.image?(0,p.jsx)(`img`,{src:t.image,alt:t.name,className:`h-10 w-10 object-cover rounded-lg border border-slate-200`}):(0,p.jsx)(`div`,{className:`h-10 w-10 bg-slate-100 rounded-lg flex items-center justify-center text-slate-400`,children:(0,p.jsx)(e,{size:16})})}),(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900`,children:t.name}),(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap text-sm text-slate-600`,children:t.category||`-`}),(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap text-sm font-bold text-slate-800`,children:t.quantityOnHand}),(0,p.jsxs)(`td`,{className:`px-6 py-4 whitespace-nowrap text-sm text-slate-600`,children:[`₹`,t.sellingPrice]}),(0,p.jsx)(`td`,{className:`px-6 py-4 whitespace-nowrap`,children:(0,p.jsx)(`span`,{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M(n)}`,children:n})}),(0,p.jsxs)(`td`,{className:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`,children:[(0,p.jsx)(`button`,{onClick:()=>T(t),className:`text-indigo-600 hover:text-indigo-900 mr-3`,children:(0,p.jsx)(d,{size:18})}),(0,p.jsx)(`button`,{onClick:()=>A(t._id),className:`text-red-500 hover:text-red-700`,children:(0,p.jsx)(r,{size:18})})]})]},t._id)}),l.length===0&&!m&&(0,p.jsx)(`tr`,{children:(0,p.jsx)(`td`,{colSpan:`7`,className:`px-6 py-10 text-center text-slate-500`,children:`No inventory items found. Add one to get started.`})})]})]})]}),v&&(0,p.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm`,children:(0,p.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in-95 duration-200`,children:[(0,p.jsxs)(`div`,{className:`px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50`,children:[(0,p.jsx)(`h3`,{className:`text-lg font-semibold text-slate-800`,children:b?`Edit Product`:`Add New Product`}),(0,p.jsx)(`button`,{onClick:E,className:`text-slate-400 hover:text-slate-600 transition-colors`,children:(0,p.jsx)(o,{size:20})})]}),(0,p.jsxs)(`form`,{onSubmit:k,className:`p-6 space-y-4`,children:[(0,p.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`SKU`}),(0,p.jsx)(`input`,{name:`sku`,value:S.sku,onChange:D,disabled:!!b,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 disabled:bg-slate-50 disabled:text-slate-500`,required:!0,placeholder:`PROD-001`})]}),(0,p.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Product Image`}),(0,p.jsxs)(`div`,{className:`flex items-center gap-4`,children:[S.image?(0,p.jsx)(`img`,{src:S.image,alt:`Preview`,className:`h-16 w-16 object-cover rounded-lg border border-slate-200`}):(0,p.jsx)(`div`,{className:`h-16 w-16 bg-slate-50 border border-slate-200 border-dashed rounded-lg flex items-center justify-center text-slate-400`,children:(0,p.jsx)(e,{size:24})}),(0,p.jsxs)(`label`,{className:`cursor-pointer bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:bg-slate-50`,children:[`Upload`,(0,p.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:O,className:`hidden`})]})]})]}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Category`}),(0,p.jsx)(`input`,{name:`category`,value:S.category,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`,placeholder:`Electronics`})]})]})]}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Product Name`}),(0,p.jsx)(`input`,{name:`name`,value:S.name,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`,required:!0,placeholder:`Wireless Headphones`})]}),(0,p.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Cost Price (₹)`}),(0,p.jsx)(`input`,{name:`costPrice`,type:`number`,min:`0`,step:`0.01`,value:S.costPrice,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`})]}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Selling Price (₹)`}),(0,p.jsx)(`input`,{name:`sellingPrice`,type:`number`,min:`0`,step:`0.01`,value:S.sellingPrice,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`,required:!0})]})]}),(0,p.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Current Stock`}),(0,p.jsx)(`input`,{name:`quantityOnHand`,type:`number`,min:`0`,value:S.quantityOnHand,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`,required:!0})]}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Reorder Level`}),(0,p.jsx)(`input`,{name:`reorderLevel`,type:`number`,min:`0`,value:S.reorderLevel,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`})]})]}),(0,p.jsxs)(`div`,{children:[(0,p.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Description`}),(0,p.jsx)(`textarea`,{name:`description`,value:S.description,onChange:D,className:`w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500`,rows:`3`,placeholder:`Product details...`})]}),(0,p.jsxs)(`div`,{className:`pt-2 flex gap-3`,children:[(0,p.jsx)(`button`,{type:`button`,onClick:E,className:`flex-1 px-4 py-2 border border-slate-200 text-slate-600 rounded-lg text-sm font-medium hover:bg-slate-50`,children:`Cancel`}),(0,p.jsx)(`button`,{type:`submit`,className:`flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 shadow-sm`,children:b?`Save Changes`:`Create Product`})]})]})]})})]})}export{m as default};