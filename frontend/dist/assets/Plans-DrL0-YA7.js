import{t as e}from"./check-BjCImq_k.js";import{t}from"./chevron-right-CMb6ihDi.js";import{t as n}from"./dollar-sign-Dpwxw7ZW.js";import{t as r}from"./globe-z3DZjNKG.js";import{t as i}from"./layers-Cv9WIzFk.js";import{t as a}from"./plus-CEMkcid2.js";import{t as o}from"./save-Du0TzjDU.js";import{t as s}from"./search-7QJDYU_6.js";import{t as c}from"./settings-C_W7aofM.js";import{t as l}from"./trash-2-Eo-Zwxxt.js";import{c as u,i as d,n as f,r as p,u as m,w as h,y as g}from"./index-FG9feFxU.js";var _=u(`chart-no-axes-column-increasing`,[[`path`,{d:`M5 21v-6`,key:`1hz6c0`}],[`path`,{d:`M12 21V9`,key:`uvy0l4`}],[`path`,{d:`M19 21V3`,key:`11j9sm`}]]),v=u(`panels-top-left`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M9 21V9`,key:`1oto5p`}]]),y=h(g(),1),b=p(),x=[{id:`fin`,title:`Financial Suite`,icon:(0,b.jsx)(n,{size:18}),color:`green`,flags:[{key:`module_finance`,label:`Finance & Accounting`,desc:`Core dashboard, expenses, and ledger`},{key:`module_invoicing`,label:`Invoicing & Estimates`,desc:`Create, send, and track invoices`}]},{id:`ops`,title:`Operations & HR`,icon:(0,b.jsx)(r,{size:18}),color:`blue`,flags:[{key:`module_inventory`,label:`Inventory Management`,desc:`Stock tracking and product catalog`},{key:`module_employees`,label:`HR & Payroll Suite`,desc:`Employees, Leaves, Payroll & Portal`},{key:`module_calendar`,label:`Calendar & Scheduling`,desc:`Events and team scheduling`}]},{id:`growth`,title:`Growth & Analytics`,icon:(0,b.jsx)(_,{size:18}),color:`purple`,flags:[{key:`module_broadcasts`,label:`Broadcasts (SMS/Email)`,desc:`Bulk messaging campaigns`},{key:`module_analytics`,label:`Advanced Analytics`,desc:`Deep insights and reporting`},{key:`module_backup`,label:`Backup & Data Export`,desc:`Full company data exports and history`},{key:`ai_enabled`,label:`AI Assistant`,desc:`Smart recommendations and help`}]}];function S(){let[n,r]=(0,y.useState)([]),[u,p]=(0,y.useState)(!0),[h,g]=(0,y.useState)(null),[_,S]=(0,y.useState)(`features`),[C,w]=(0,y.useState)({}),[T,E]=(0,y.useState)({name:``,priceMonthly:0}),[D,O]=(0,y.useState)(!1),[k,A]=(0,y.useState)({name:``,code:``,priceMonthly:0,defaultFlags:{}}),j=(0,y.useMemo)(()=>n.find(e=>e._id===h),[n,h]);(0,y.useEffect)(()=>{M()},[]),(0,y.useEffect)(()=>{j&&(w(j.defaultFlags||{}),E({name:j.name,priceMonthly:j.priceMonthly}))},[j]);let M=async(e=null)=>{p(!0);try{let t=((await f.get(`/sa/plans`)).data||[]).filter(e=>!e.isArchived);r(t),e?g(e):!h&&t.length>0&&g(t[0]._id)}catch{m.error(`Failed to fetch plans`)}finally{p(!1)}},N=async()=>{if(h)try{await f.patch(`/sa/plans/${h}`,{defaultFlags:C}),m.success(`Plan features updated successfully!`),M(h)}catch(e){console.error(`Save features error:`,e),m.error(`Failed to save: `+(e.response?.data?.message||e.message))}},P=async e=>{e.preventDefault();try{await f.patch(`/sa/plans/${h}`,T),m.success(`Plan details updated!`),M(h)}catch(e){m.error(`Update failed: `+e.message)}},F=async e=>{e.preventDefault();try{let e=await f.post(`/sa/plans`,{...k,code:k.code.toUpperCase().replace(/\s+/g,`_`)});m.success(`New Plan Created!`),O(!1),A({name:``,code:``,priceMonthly:0,defaultFlags:{}}),M(e.data._id)}catch(e){m.error(`Creation failed: `+(e.response?.data?.message||e.message))}},I=async e=>{if(window.confirm(`Are you sure you want to archive this plan? It will be hidden from new selections.`))try{await f.patch(`/sa/plans/${e}/archive`),m.success(`Plan archived`),h===e&&g(null),M()}catch(e){m.error(`Archive failed: `+(e.response?.data?.message||e.message))}},L=e=>{w(t=>({...t,[e]:!t[e]}))},R=e=>{A(t=>({...t,defaultFlags:{...t.defaultFlags,[e]:!t.defaultFlags[e]}}))};return(0,b.jsxs)(`div`,{className:`h-[calc(100vh-120px)] flex flex-col gap-6`,children:[(0,b.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800`,children:`Subscription Plans`}),(0,b.jsx)(`p`,{className:`text-sm text-slate-500`,children:`Configure global tiers and feature access`})]}),(0,b.jsxs)(`button`,{onClick:()=>O(!0),className:`bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-indigo-700 flex items-center gap-2 transition-all shadow-sm`,children:[(0,b.jsx)(a,{size:18}),` Create Plan`]})]}),(0,b.jsxs)(`div`,{className:`flex-1 flex gap-6 overflow-hidden min-h-0`,children:[(0,b.jsxs)(`div`,{className:`w-80 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden`,children:[(0,b.jsx)(`div`,{className:`p-4 border-b border-slate-100 bg-slate-50/50`,children:(0,b.jsxs)(`div`,{className:`relative`,children:[(0,b.jsx)(s,{className:`absolute left-3 top-2.5 h-4 w-4 text-slate-400`}),(0,b.jsx)(`input`,{type:`text`,placeholder:`Search plans...`,className:`w-full pl-9 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20`})]})}),(0,b.jsx)(`div`,{className:`flex-1 overflow-y-auto p-2 space-y-1`,children:u?(0,b.jsx)(`div`,{className:`text-center py-10 text-slate-400 text-sm`,children:`Loading...`}):n.length===0?(0,b.jsx)(`div`,{className:`text-center py-10 text-slate-400 text-sm`,children:`No active plans found.`}):n.map(e=>(0,b.jsxs)(`button`,{onClick:()=>g(e._id),className:`w-full text-left p-4 rounded-xl transition-all group relative border ${h===e._id?`bg-indigo-50 border-indigo-200 shadow-sm ring-1 ring-indigo-200`:`bg-white border-transparent hover:bg-slate-50`}`,children:[(0,b.jsxs)(`div`,{className:`flex justify-between items-start`,children:[(0,b.jsx)(`div`,{className:`font-bold text-slate-900`,children:e.name}),(0,b.jsxs)(`div`,{className:`text-indigo-600 font-bold text-sm`,children:[`$`,e.priceMonthly,`/mo`]})]}),(0,b.jsx)(`div`,{className:`text-[10px] font-mono text-slate-400 mt-1 uppercase tracking-wider`,children:e.code}),h===e._id&&(0,b.jsx)(t,{className:`absolute right-2 top-1/2 -translate-y-1/2 text-indigo-400`,size:16})]},e._id))})]}),(0,b.jsx)(`div`,{className:`flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden`,children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(`div`,{className:`px-6 border-b border-slate-100 flex items-center justify-between h-14 bg-slate-50/50`,children:[(0,b.jsxs)(`div`,{className:`flex h-full`,children:[(0,b.jsxs)(`button`,{onClick:()=>S(`features`),className:`px-4 h-full text-sm font-semibold border-b-2 transition-all flex items-center gap-2 ${_===`features`?`border-indigo-600 text-indigo-600 bg-white`:`border-transparent text-slate-500 hover:text-slate-700`}`,children:[(0,b.jsx)(i,{size:16}),` Features`]}),(0,b.jsxs)(`button`,{onClick:()=>S(`settings`),className:`px-4 h-full text-sm font-semibold border-b-2 transition-all flex items-center gap-2 ${_===`settings`?`border-indigo-600 text-indigo-600 bg-white`:`border-transparent text-slate-500 hover:text-slate-700`}`,children:[(0,b.jsx)(c,{size:16}),` Settings`]})]}),(0,b.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,b.jsx)(`button`,{onClick:()=>I(h),className:`p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all`,title:`Archive Plan`,children:(0,b.jsx)(l,{size:18})}),_===`features`&&(0,b.jsxs)(`button`,{onClick:N,className:`px-4 py-1.5 bg-slate-900 text-white rounded-lg text-sm font-semibold hover:bg-slate-800 flex items-center gap-2 shadow-md transition-all active:scale-95`,children:[(0,b.jsx)(o,{size:16}),` Save Changes`]})]})]}),(0,b.jsx)(`div`,{className:`flex-1 overflow-y-auto p-6`,children:_===`features`?(0,b.jsx)(`div`,{className:`grid grid-cols-1 xl:grid-cols-3 gap-6`,children:x.map(e=>(0,b.jsxs)(`div`,{className:`flex flex-col border border-slate-100 rounded-2xl overflow-hidden shadow-sm bg-slate-50/30`,children:[(0,b.jsxs)(`div`,{className:`p-4 flex items-center gap-3 bg-${e.color}-50 text-${e.color}-700 border-b border-${e.color}-100`,children:[(0,b.jsx)(`div`,{className:`p-1.5 bg-${e.color}-100 rounded-lg`,children:e.icon}),(0,b.jsx)(`h4`,{className:`font-bold text-sm uppercase tracking-wide`,children:e.title})]}),(0,b.jsx)(`div`,{className:`p-4 space-y-4`,children:e.flags.map(e=>(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 group/item`,children:[(0,b.jsxs)(`div`,{className:`min-w-0 pr-2`,children:[(0,b.jsx)(`div`,{className:`text-sm font-bold text-slate-800 flex items-center gap-1.5`,children:e.label}),(0,b.jsx)(`div`,{className:`text-[11px] text-slate-500 leading-tight mt-0.5`,children:e.desc})]}),(0,b.jsx)(`button`,{onClick:()=>L(e.key),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${C[e.key]?`bg-indigo-600`:`bg-slate-200`}`,children:(0,b.jsx)(`span`,{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${C[e.key]?`translate-x-5`:`translate-x-0`}`})})]},e.key))})]},e.id))}):(0,b.jsx)(`div`,{className:`max-w-lg mx-auto py-8`,children:(0,b.jsx)(`form`,{onSubmit:P,className:`space-y-6`,children:(0,b.jsxs)(`div`,{className:`grid grid-cols-1 gap-6`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-1.5`,children:`Plan Display Name`}),(0,b.jsx)(`input`,{type:`text`,value:T.name,onChange:e=>E({...T,name:e.target.value}),className:`w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 text-sm font-medium`,placeholder:`e.g. Pro Plan`})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{className:`block text-sm font-bold text-slate-700 mb-1.5`,children:`Price Monthly ($)`}),(0,b.jsxs)(`div`,{className:`relative`,children:[(0,b.jsx)(`div`,{className:`absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold`,children:`$`}),(0,b.jsx)(`input`,{type:`number`,value:T.priceMonthly,onChange:e=>E({...T,priceMonthly:e.target.value}),className:`w-full pl-8 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 text-sm font-medium`,placeholder:`0.00`})]})]}),(0,b.jsx)(`div`,{className:`pt-4 border-t border-slate-100 flex justify-end`,children:(0,b.jsx)(`button`,{type:`submit`,className:`px-6 py-2.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition-all active:scale-95 text-sm`,children:`Update Settings`})})]})})})})]}):(0,b.jsxs)(`div`,{className:`flex-1 flex flex-col items-center justify-center text-slate-400 p-12 text-center`,children:[(0,b.jsx)(`div`,{className:`w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4`,children:(0,b.jsx)(v,{size:32})}),(0,b.jsx)(`h3`,{className:`text-lg font-semibold text-slate-600`,children:`No Plan Selected`}),(0,b.jsx)(`p`,{className:`max-w-xs mt-2`,children:`Select a plan from the left to manage its features and pricing.`})]})})]}),D&&(0,b.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4`,children:(0,b.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]`,children:[(0,b.jsxs)(`div`,{className:`px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`h3`,{className:`font-bold text-lg text-slate-800`,children:`New Subscription Tier`}),(0,b.jsx)(`p`,{className:`text-xs text-slate-500`,children:`Define a new global plan`})]}),(0,b.jsx)(`button`,{onClick:()=>O(!1),className:`text-slate-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-full transition-all`,children:(0,b.jsx)(d,{size:24})})]}),(0,b.jsxs)(`form`,{onSubmit:F,className:`p-6 overflow-y-auto space-y-5`,children:[(0,b.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,b.jsxs)(`div`,{className:`col-span-2`,children:[(0,b.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-1`,children:`Plan Name`}),(0,b.jsx)(`input`,{type:`text`,required:!0,value:k.name,onChange:e=>A({...k,name:e.target.value}),className:`w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20`,placeholder:`e.g. Enterprise`})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-1`,children:`Unique Code`}),(0,b.jsx)(`input`,{type:`text`,required:!0,value:k.code,onChange:e=>A({...k,code:e.target.value.toUpperCase()}),className:`w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 font-mono text-sm`,placeholder:`ENT_TIER`})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-1`,children:`Price / Mo`}),(0,b.jsx)(`input`,{type:`number`,required:!0,min:`0`,value:k.priceMonthly,onChange:e=>A({...k,priceMonthly:e.target.value}),className:`w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20`})]})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{className:`block text-xs font-bold text-slate-500 uppercase mb-3`,children:`Feature Inclusion`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 gap-2 border border-slate-100 rounded-xl p-2 bg-slate-50/50`,children:x.flatMap(e=>e.flags).map(t=>(0,b.jsxs)(`button`,{type:`button`,onClick:()=>R(t.key),className:`flex items-center justify-between p-3 rounded-xl transition-all ${k.defaultFlags[t.key]?`bg-indigo-600 text-white shadow-md`:`bg-white text-slate-600 hover:bg-slate-100`}`,children:[(0,b.jsxs)(`div`,{className:`text-left`,children:[(0,b.jsx)(`div`,{className:`text-sm font-bold ${k.defaultFlags[t.key]?`text-white`:`text-slate-800`}`,children:t.label}),(0,b.jsx)(`div`,{className:`text-[10px] ${k.defaultFlags[t.key]?`text-indigo-100`:`text-slate-400`}`,children:t.desc})]}),k.defaultFlags[t.key]?(0,b.jsx)(e,{size:16}):(0,b.jsx)(a,{size:16,className:`text-slate-300`})]},t.key))})]}),(0,b.jsxs)(`div`,{className:`pt-4 flex gap-3`,children:[(0,b.jsx)(`button`,{type:`button`,onClick:()=>O(!1),className:`flex-1 px-4 py-3 text-slate-600 font-bold hover:bg-slate-100 rounded-xl`,children:`Discard`}),(0,b.jsx)(`button`,{type:`submit`,className:`flex-[2] bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all active:scale-95`,children:`Create Plan`})]})]})]})})]})}export{S as default};