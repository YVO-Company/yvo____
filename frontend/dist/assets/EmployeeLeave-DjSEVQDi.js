import{t as e}from"./plus-CEMkcid2.js";import{i as t,n,r,w as i,y as a}from"./index-FG9feFxU.js";var o=i(a(),1),s=r();function c(){let[r,i]=(0,o.useState)([]),[a,c]=(0,o.useState)(!0),[l,u]=(0,o.useState)(!1),[d,f]=(0,o.useState)({type:`Sick Leave`,startDate:``,endDate:``,reason:``}),p=async()=>{c(!0);try{i((await n.get(`/employee/dashboard/leaves`)).data)}catch(e){console.error(`Error fetching leaves`,e)}finally{c(!1)}};return(0,o.useEffect)(()=>{p()},[]),a&&!r.length?(0,s.jsx)(`div`,{children:`Loading...`}):(0,s.jsxs)(`div`,{className:`space-y-6`,children:[(0,s.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,s.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800`,children:`Leave Management`}),(0,s.jsxs)(`button`,{onClick:()=>u(!0),className:`flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700`,children:[(0,s.jsx)(e,{size:18}),` Apply for New Leave`]})]}),l&&(0,s.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4`,children:(0,s.jsxs)(`div`,{className:`w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl`,children:[(0,s.jsxs)(`div`,{className:`flex justify-between items-center mb-6`,children:[(0,s.jsx)(`h3`,{className:`text-lg font-bold text-slate-900`,children:`Apply for Leave`}),(0,s.jsx)(`button`,{onClick:()=>u(!1),className:`text-slate-400 hover:text-slate-600`,children:(0,s.jsx)(t,{size:20})})]}),(0,s.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault();try{await n.post(`/employee/dashboard/leaves`,d),u(!1),f({type:`Sick Leave`,startDate:``,endDate:``,reason:``}),p()}catch{alert(`Failed to apply for leave`)}},className:`space-y-4`,children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Leave Type`}),(0,s.jsxs)(`select`,{className:`w-full rounded-lg border border-slate-300 p-2.5`,value:d.type,onChange:e=>f({...d,type:e.target.value}),children:[(0,s.jsx)(`option`,{children:`Sick Leave`}),(0,s.jsx)(`option`,{children:`Casual Leave`}),(0,s.jsx)(`option`,{children:`Paid Leave`}),(0,s.jsx)(`option`,{children:`Unpaid Leave`})]})]}),(0,s.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Start Date`}),(0,s.jsx)(`input`,{type:`date`,required:!0,className:`w-full rounded-lg border border-slate-300 p-2.5`,value:d.startDate,onChange:e=>f({...d,startDate:e.target.value})})]}),(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`End Date`}),(0,s.jsx)(`input`,{type:`date`,required:!0,className:`w-full rounded-lg border border-slate-300 p-2.5`,value:d.endDate,onChange:e=>f({...d,endDate:e.target.value})})]})]}),(0,s.jsxs)(`div`,{children:[(0,s.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Reason`}),(0,s.jsx)(`textarea`,{required:!0,className:`w-full rounded-lg border border-slate-300 p-2.5 h-24`,placeholder:`Briefly describe the reason...`,value:d.reason,onChange:e=>f({...d,reason:e.target.value})})]}),(0,s.jsxs)(`div`,{className:`flex justify-end gap-3 mt-6`,children:[(0,s.jsx)(`button`,{type:`button`,onClick:()=>u(!1),className:`px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg`,children:`Cancel`}),(0,s.jsx)(`button`,{type:`submit`,className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700`,children:`Submit Request`})]})]})]})}),(0,s.jsx)(`div`,{className:`grid gap-4`,children:r.length===0?(0,s.jsx)(`div`,{className:`text-center py-10 text-slate-500 bg-slate-50 rounded-xl border border-slate-200`,children:`No active or past leave requests.`}):r.map(e=>(0,s.jsxs)(`div`,{className:`bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-start md:items-center gap-4`,children:[(0,s.jsxs)(`div`,{children:[(0,s.jsxs)(`div`,{className:`flex items-center gap-3 mb-1`,children:[(0,s.jsx)(`span`,{className:`font-semibold text-slate-900`,children:e.type}),(0,s.jsx)(`span`,{className:`text-xs px-2 py-1 rounded-full font-medium
                                        ${e.status===`Approved`?`bg-emerald-100 text-emerald-700`:e.status===`Rejected`?`bg-red-100 text-red-700`:`bg-amber-100 text-amber-700`}`,children:e.status})]}),(0,s.jsxs)(`p`,{className:`text-sm text-slate-600`,children:[new Date(e.startDate).toLocaleDateString(),` - `,new Date(e.endDate).toLocaleDateString()]}),(0,s.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:e.reason})]}),(0,s.jsxs)(`div`,{className:`text-right text-xs text-slate-400`,children:[`Applied on `,new Date(e.createdAt).toLocaleDateString()]})]},e._id))})]})}export{c as default};