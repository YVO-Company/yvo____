import{t as e}from"./building-Db3oIjcF.js";import{t}from"./save-Du0TzjDU.js";import{n,r,t as i,w as a,y as o}from"./index-FG9feFxU.js";var s=a(o(),1),c=r();function l(){let{user:r}=i(),[a,o]=(0,s.useState)(!1),[l,u]=(0,s.useState)({companyName:``,ownerName:``,email:``,phone:``,website:``,address:``,currency:`INR`,invoiceEditPassword:``,logo:``});s.useEffect(()=>{(async()=>{try{let e=(await n.get(`/company/config`)).data.company;e&&u({companyName:e.name||``,ownerName:r?.fullName||``,email:e.email||r?.email||``,phone:e.phone||``,website:e.website||``,address:e.address||``,currency:e.currency||`INR`,invoiceEditPassword:e.invoiceEditPassword||``,logo:e.logo||``})}catch(e){console.error(`Failed to fetch settings`,e)}})()},[r]);let d=e=>{u({...l,[e.target.name]:e.target.value})};return(0,c.jsxs)(`div`,{className:`max-w-4xl mx-auto space-y-6`,children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`h1`,{className:`text-2xl font-bold text-slate-800`,children:`Settings`}),(0,c.jsx)(`p`,{className:`text-sm text-slate-500 mt-1`,children:`Manage your company profile, branding, and preferences.`})]}),(0,c.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault(),o(!0);try{let e=localStorage.getItem(`companyId`);if(!e)throw Error(`Company ID not found. Please log out and log in again.`);let t={name:l.companyName,email:l.email,phone:l.phone,website:l.website,address:l.address,currency:l.currency,invoiceEditPassword:l.invoiceEditPassword,logo:l.logo};await n.patch(`/company/${e}`,t),alert(`Settings Saved Successfully! Changes will reflect across the admin panel.`)}catch(e){console.error(e);let t=e.response?.data?.message||e.message||`Unknown error`;alert(`Failed to save settings: `+t)}finally{o(!1)}},className:`bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden`,children:[(0,c.jsx)(`div`,{className:`px-6 py-4 border-b border-slate-200 bg-slate-50`,children:(0,c.jsx)(`h3`,{className:`font-semibold text-slate-800`,children:`Company Profile`})}),(0,c.jsxs)(`div`,{className:`p-6 space-y-6`,children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-2`,children:`Company Logo`}),(0,c.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,c.jsx)(`div`,{className:`w-20 h-20 rounded-lg border border-slate-200 bg-slate-50 flex items-center justify-center overflow-hidden`,children:l.logo?(0,c.jsx)(`img`,{src:l.logo,alt:`Logo`,className:`w-full h-full object-contain`}):(0,c.jsx)(e,{size:24,className:`text-slate-300`})}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onloadend=()=>{u(t=>({...t,logo:e.result}))},e.readAsDataURL(t)}},className:`block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100`}),(0,c.jsx)(`p`,{className:`text-xs text-slate-500 mt-1`,children:`Recommended: 200x200px PNG or JPG.`})]})]})]}),(0,c.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-6`,children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Company Name`}),(0,c.jsx)(`input`,{type:`text`,name:`companyName`,value:l.companyName,onChange:d,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Owner Name`}),(0,c.jsx)(`input`,{type:`text`,name:`ownerName`,value:l.ownerName,disabled:!0,className:`w-full px-3 py-2 rounded-lg border border-slate-200 bg-slate-50 text-slate-500`})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Email Address`}),(0,c.jsx)(`input`,{type:`email`,name:`email`,value:l.email,onChange:d,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Phone Number`}),(0,c.jsx)(`input`,{type:`tel`,name:`phone`,value:l.phone,onChange:d,placeholder:`+91 98765 43210`,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Website`}),(0,c.jsx)(`input`,{type:`url`,name:`website`,value:l.website,onChange:d,placeholder:`https://example.com`,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Currency`}),(0,c.jsxs)(`select`,{name:`currency`,value:l.currency,onChange:d,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500 bg-white`,children:[(0,c.jsx)(`option`,{value:`INR`,children:`INR (₹)`}),(0,c.jsx)(`option`,{value:`USD`,children:`USD ($)`}),(0,c.jsx)(`option`,{value:`EUR`,children:`EUR (€)`}),(0,c.jsx)(`option`,{value:`GBP`,children:`GBP (£)`})]})]})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Business Address`}),(0,c.jsx)(`textarea`,{name:`address`,value:l.address,onChange:d,rows:3,className:`w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]})]}),(0,c.jsx)(`div`,{className:`px-6 py-4 border-b border-slate-200 bg-slate-50 mt-6`,children:(0,c.jsx)(`h3`,{className:`font-semibold text-slate-800`,children:`Invoice Security`})}),(0,c.jsx)(`div`,{className:`p-6 space-y-6`,children:(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Invoice Edit Password`}),(0,c.jsx)(`p`,{className:`text-xs text-slate-500 mb-2`,children:`Required to edit existing invoices. Leave blank to disable.`}),(0,c.jsx)(`input`,{type:`password`,name:`invoiceEditPassword`,value:l.invoiceEditPassword||``,onChange:d,placeholder:`Set a secure password...`,className:`w-full max-w-md px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-1 focus:ring-indigo-500`})]})}),(0,c.jsx)(`div`,{className:`px-6 py-4 border-t border-slate-200 bg-slate-50 flex justify-end`,children:(0,c.jsxs)(`button`,{type:`submit`,disabled:a,className:`flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-70 transition-all`,children:[(0,c.jsx)(t,{size:18}),` `,a?`Saving...`:`Save Changes`]})})]})]})}export{l as default};