import{t as e}from"./calendar-BE1FZPaA.js";import{t}from"./clock-p49MgRWf.js";import{t as n}from"./dollar-sign-Dpwxw7ZW.js";import{t as r}from"./message-square-CVnSaj1a.js";import{i,m as a,n as o,r as s,t as c,w as l,y as u}from"./index-FG9feFxU.js";var d=l(u(),1),f=s(),p=({icon:e,label:t,value:n,subtext:r})=>(0,f.jsxs)(`div`,{className:`rounded-2xl border border-slate-100 bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] flex items-center gap-4 hover:translate-y-[-2px] transition-all duration-300`,children:[(0,f.jsx)(`div`,{className:`p-3.5 rounded-xl bg-slate-50 border border-slate-100/80`,children:e}),(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`p`,{className:`text-[13px] font-semibold text-slate-500 uppercase tracking-wider`,children:t}),(0,f.jsx)(`p`,{className:`text-2xl font-black text-slate-900`,children:n}),(0,f.jsx)(`p`,{className:`text-xs font-medium text-slate-400 mt-0.5`,children:r})]})]});function m(){let{user:s}=c(),l=a(),[u,m]=(0,d.useState)({pendingLeaves:0,upcomingEvents:0,unreadBroadcasts:0,lastSalary:null}),[h,g]=(0,d.useState)(!0),[_,v]=(0,d.useState)(!1),[y,b]=(0,d.useState)({type:`Sick Leave`,startDate:``,endDate:``,reason:``}),[x,S]=(0,d.useState)(!1),[C,w]=(0,d.useState)({tasksCompleted:``,issues:``,nextDayPlan:``}),T=async()=>{try{let[e,t,n,r]=await Promise.all([o.get(`/employee/dashboard/leaves`),o.get(`/employee/dashboard/calendar`),o.get(`/employee/dashboard/broadcasts`),o.get(`/employee/dashboard/salary`)]),i=Array.isArray(e.data)?e.data:[],a=Array.isArray(t.data)?t.data:[],s=Array.isArray(n.data)?n.data:[],c=Array.isArray(r.data)?r.data:[];m({pendingLeaves:i.filter(e=>e&&e.status===`Pending`).length,upcomingEvents:a.length,unreadBroadcasts:s.length,lastSalary:c.length>0?c[0]:null})}catch(e){console.error(`Error loading stats`,e)}finally{g(!1)}};return(0,d.useEffect)(()=>{T()},[]),h?(0,f.jsx)(`div`,{children:`Loading dashboard...`}):(0,f.jsxs)(`div`,{className:`space-y-6`,children:[(0,f.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,f.jsxs)(`h1`,{className:`text-3xl font-black text-slate-900 tracking-tight`,children:[`Welcome Back to `,s.company?.name||s.companyId?.name||`the Portal`,`!`]}),(0,f.jsxs)(`p`,{className:`text-slate-500 font-medium`,children:[`You are logged into `,(0,f.jsx)(`span`,{className:`text-blue-600 font-bold`,children:s.company?.name||s.companyId?.name||`your company portal`})]})]}),(0,f.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`,children:[(0,f.jsx)(p,{icon:(0,f.jsx)(n,{className:`text-blue-600`}),label:`Last Salary`,value:u.lastSalary?`â‚¹${u.lastSalary.amount}`:`N/A`,subtext:u.lastSalary?u.lastSalary.payPeriod:`-`}),(0,f.jsx)(p,{icon:(0,f.jsx)(t,{className:`text-orange-600`}),label:`Pending Leaves`,value:u.pendingLeaves,subtext:`Awaiting approval`}),(0,f.jsx)(p,{icon:(0,f.jsx)(e,{className:`text-blue-600`}),label:`Upcoming Events`,value:u.upcomingEvents,subtext:`Scheduled`}),(0,f.jsx)(p,{icon:(0,f.jsx)(r,{className:`text-purple-600`}),label:`Broadcasts`,value:u.unreadBroadcasts,subtext:`Recent messages`})]}),(0,f.jsx)(`div`,{className:`rounded-2xl border border-blue-100 bg-gradient-to-br from-white to-blue-50/30 p-8 shadow-sm`,children:(0,f.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6`,children:[(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`h3`,{className:`text-xl font-black text-slate-800 mb-1`,children:`Quick Actions`}),(0,f.jsx)(`p`,{className:`text-slate-500 text-sm font-medium`,children:`Manage your requests and schedule in one click`})]}),(0,f.jsxs)(`div`,{className:`flex gap-4 w-full sm:w-auto`,children:[(0,f.jsx)(`button`,{onClick:()=>v(!0),className:`flex-1 sm:flex-none px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-200 font-bold`,children:`Apply for Leave`}),(0,f.jsx)(`button`,{onClick:()=>S(!0),className:`flex-1 sm:flex-none px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition shadow-lg shadow-green-200 font-bold`,children:`Fill Daily Report`}),(0,f.jsx)(`button`,{onClick:()=>l(`/employee-dashboard/calendar`),className:`flex-1 sm:flex-none px-6 py-3 bg-white text-slate-700 border border-slate-200 rounded-xl hover:bg-slate-50 transition font-bold`,children:`View Calendar`})]})]})}),_&&(0,f.jsx)(`div`,{className:`fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4`,children:(0,f.jsxs)(`div`,{className:`bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200`,children:[(0,f.jsxs)(`div`,{className:`flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50/50`,children:[(0,f.jsx)(`h2`,{className:`text-lg font-bold text-slate-800`,children:`Apply for Leave`}),(0,f.jsx)(`button`,{onClick:()=>v(!1),className:`text-slate-400 hover:text-slate-600`,children:(0,f.jsx)(i,{size:20})})]}),(0,f.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault();try{await o.post(`/employee/dashboard/leaves`,y),alert(`Leave application submitted successfully!`),v(!1),b({type:`Sick Leave`,startDate:``,endDate:``,reason:``}),T()}catch(e){console.error(e),alert(`Failed to apply for leave`)}},className:`p-6 space-y-4`,children:[(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Leave Type`}),(0,f.jsxs)(`select`,{className:`w-full border border-slate-200 p-2 rounded-lg bg-white`,value:y.type,onChange:e=>b({...y,type:e.target.value}),children:[(0,f.jsx)(`option`,{children:`Sick Leave`}),(0,f.jsx)(`option`,{children:`Casual Leave`}),(0,f.jsx)(`option`,{children:`Paid Leave`}),(0,f.jsx)(`option`,{children:`Unpaid Leave`})]})]}),(0,f.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Start Date`}),(0,f.jsx)(`input`,{type:`date`,required:!0,className:`w-full border border-slate-200 p-2 rounded-lg`,value:y.startDate,onChange:e=>b({...y,startDate:e.target.value})})]}),(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`End Date`}),(0,f.jsx)(`input`,{type:`date`,required:!0,className:`w-full border border-slate-200 p-2 rounded-lg`,value:y.endDate,onChange:e=>b({...y,endDate:e.target.value})})]})]}),(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Reason`}),(0,f.jsx)(`textarea`,{required:!0,rows:`3`,className:`w-full border border-slate-200 p-2 rounded-lg`,value:y.reason,onChange:e=>b({...y,reason:e.target.value}),placeholder:`Brief reason for leave...`})]}),(0,f.jsx)(`div`,{className:`pt-2`,children:(0,f.jsx)(`button`,{type:`submit`,className:`w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium`,children:`Submit Request`})})]})]})}),x&&(0,f.jsx)(`div`,{className:`fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4`,children:(0,f.jsxs)(`div`,{className:`bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200`,children:[(0,f.jsxs)(`div`,{className:`flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50/50`,children:[(0,f.jsx)(`h2`,{className:`text-lg font-bold text-slate-800`,children:`Daily Work Report`}),(0,f.jsx)(`button`,{onClick:()=>S(!1),className:`text-slate-400 hover:text-slate-600`,children:(0,f.jsx)(i,{size:20})})]}),(0,f.jsxs)(`form`,{onSubmit:async e=>{e.preventDefault();try{await o.post(`/employee/dashboard/reports`,C),alert(`Daily report submitted successfully!`),S(!1),w({tasksCompleted:``,issues:``,nextDayPlan:``})}catch(e){console.error(e),e.response?.status===400?alert(e.response.data.message):alert(`Failed to submit report`)}},className:`p-6 space-y-4`,children:[(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Tasks Completed Today`}),(0,f.jsx)(`textarea`,{required:!0,rows:`3`,className:`w-full border border-slate-200 p-2 rounded-lg`,value:C.tasksCompleted,onChange:e=>w({...C,tasksCompleted:e.target.value}),placeholder:`List tasks you finished...`})]}),(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Issues / Blockers`}),(0,f.jsx)(`textarea`,{rows:`2`,className:`w-full border border-slate-200 p-2 rounded-lg`,value:C.issues,onChange:e=>w({...C,issues:e.target.value}),placeholder:`Any problems encountered?`})]}),(0,f.jsxs)(`div`,{children:[(0,f.jsx)(`label`,{className:`text-xs font-semibold text-slate-500 mb-1 block`,children:`Plan for Tomorrow`}),(0,f.jsx)(`textarea`,{rows:`2`,className:`w-full border border-slate-200 p-2 rounded-lg`,value:C.nextDayPlan,onChange:e=>w({...C,nextDayPlan:e.target.value}),placeholder:`What will you work on next?`})]}),(0,f.jsx)(`div`,{className:`pt-2`,children:(0,f.jsx)(`button`,{type:`submit`,className:`w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-bold shadow-lg shadow-green-200 transition`,children:`Submit Daily Report`})})]})]})})]})}export{m as default};