import{t as e}from"./building-2-D7dfKyhA.js";import{t}from"./calendar-BE1FZPaA.js";import{t as n}from"./chart-column-DKawOn-J.js";import{t as r}from"./database-BRdzMIiP.js";import{t as i}from"./file-text-X3F31LPe.js";import{n as a,t as o}from"./log-out-ByJLANUy.js";import{t as s}from"./lock-DSGmDFD7.js";import{t as c}from"./settings-C_W7aofM.js";import{t as l}from"./shield-Ce6TwFu_.js";import{t as u}from"./users-Bws8m-qo.js";import{a as d,c as f,d as p,f as m,i as h,m as g,n as _,p as v,r as y,t as b,u as x,w as S,y as C}from"./index-FG9feFxU.js";var w=f(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),T=f(`cloud`,[[`path`,{d:`M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z`,key:`p7xjir`}]]),E=f(`ticket`,[[`path`,{d:`M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z`,key:`qn84l0`}],[`path`,{d:`M13 5v2`,key:`dyzc3o`}],[`path`,{d:`M13 17v2`,key:`1ont0d`}],[`path`,{d:`M13 11v2`,key:`1wjjxi`}]]),D=S(C(),1),O=y();function k(){let{user:s,logout:f,loading:p}=b(),y=g(),[x,S]=(0,D.useState)(null),[C,w]=(0,D.useState)(!1),[k,j]=(0,D.useState)(!1),M=v();(0,D.useEffect)(()=>{j(!1)},[M.pathname]),(0,D.useEffect)(()=>{!p&&!s&&y(`/login`)},[p,s,y]),(0,D.useEffect)(()=>{p||!s||s.isSuperAdmin||(async()=>{w(!0);try{S((await _.get(`/company/config`)).data)}catch(e){console.error(`Failed to load company config`,e)}finally{w(!1)}})()},[s,p]);let N=()=>{f(),y(`/login`)};return p?(0,O.jsx)(`div`,{className:`min-h-screen flex items-center justify-center text-slate-500`,children:`Initializing...`}):s?s.isSuperAdmin?(0,O.jsxs)(`div`,{className:`flex min-h-screen bg-slate-50 text-slate-900`,children:[k&&(0,O.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-20 lg:hidden`,onClick:()=>j(!1)}),(0,O.jsxs)(`aside`,{className:"fixed inset-y-0 left-0 z-30 w-64 bg-white border-r border-slate-200 transform transition-transform duration-300 ease-in-out ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} lg:translate-x-0",children:[(0,O.jsxs)(`div`,{className:`flex h-16 items-center justify-between px-6 border-b border-slate-100`,children:[(0,O.jsxs)(`div`,{className:`flex items-center`,children:[(0,O.jsx)(`img`,{src:`/admin-logo.svg`,alt:`Admin`,className:`h-8 w-8 mr-3 object-contain`}),(0,O.jsx)(`span`,{className:`text-lg font-bold text-slate-800 tracking-tight`,children:`Admin`})]}),(0,O.jsx)(`button`,{onClick:()=>j(!1),className:`lg:hidden text-slate-400 hover:text-slate-600`,children:(0,O.jsx)(h,{size:24})})]}),(0,O.jsxs)(`nav`,{className:`mt-6 px-3 space-y-1`,children:[(0,O.jsx)(A,{icon:(0,O.jsx)(a,{size:20}),label:`Overview`,href:`/dashboard`,active:M.pathname===`/dashboard`}),(0,O.jsx)(A,{icon:(0,O.jsx)(e,{size:20}),label:`Companies`,href:`/dashboard/companies`,active:M.pathname===`/dashboard/companies`}),(0,O.jsx)(A,{icon:(0,O.jsx)(u,{size:20}),label:`Manage Clients`,href:`/dashboard/clients`,active:M.pathname===`/dashboard/clients`}),(0,O.jsx)(A,{icon:(0,O.jsx)(E,{size:20}),label:`Plans & Feature Flags`,href:`/dashboard/plans`,active:M.pathname===`/dashboard/plans`}),(0,O.jsx)(A,{icon:(0,O.jsx)(i,{size:20}),label:`Invoice Templates`,href:`/dashboard/templates`,active:M.pathname===`/dashboard/templates`}),(0,O.jsx)(`div`,{className:`pt-4 pb-2`,children:(0,O.jsx)(`div`,{className:`px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider`,children:`System`})}),(0,O.jsx)(A,{icon:(0,O.jsx)(T,{size:20}),label:`Cloud & Sync Control`,href:`/dashboard/sync`}),(0,O.jsx)(A,{icon:(0,O.jsx)(r,{size:20}),label:`Backup & Reports`,href:`/dashboard/backup-reports`,active:M.pathname===`/dashboard/backup-reports`}),(0,O.jsx)(A,{icon:(0,O.jsx)(n,{size:20}),label:`Analytics (Year-wise)`,href:`/dashboard/analytics`}),(0,O.jsx)(A,{icon:(0,O.jsx)(l,{size:20}),label:`Security & Logs`,href:`/dashboard/logs`})]}),(0,O.jsx)(`div`,{className:`absolute bottom-0 w-full border-t border-slate-200 p-4`,children:(0,O.jsxs)(`button`,{onClick:N,className:`flex items-center gap-3 w-full px-3 py-2 text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors`,children:[(0,O.jsx)(o,{size:18}),`Logout`]})})]}),(0,O.jsxs)(`div`,{className:`flex-1 lg:ml-64 flex flex-col min-w-0`,children:[(0,O.jsxs)(`header`,{className:`sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 h-16 flex items-center justify-between px-4 lg:px-8`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsx)(`button`,{onClick:()=>j(!0),className:`lg:hidden p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-lg`,children:(0,O.jsx)(d,{size:24})}),(0,O.jsx)(`div`,{className:`hidden md:flex items-center w-full max-w-md`,children:(0,O.jsx)(`input`,{type:`text`,placeholder:`Search...`,className:`w-64 h-10 pl-4 pr-10 rounded-lg border border-slate-200 bg-slate-50 text-sm focus:bg-white focus:border-blue-500 focus:outline-none transition-all`})})]}),(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsxs)(`button`,{className:`h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200`,children:[(0,O.jsx)(`span`,{className:`sr-only`,children:`Notifications`}),(0,O.jsx)(`div`,{className:`h-2 w-2 rounded-full bg-red-500 absolute top-3 right-3 border-2 border-white`}),`ðŸ””`]}),(0,O.jsx)(`div`,{className:`h-9 w-9 rounded-full bg-gradient-to-tr from-blue-500 to-indigo-600 p-0.5`,children:(0,O.jsx)(`div`,{className:`h-full w-full rounded-full bg-white flex items-center justify-center`,children:(0,O.jsx)(`img`,{src:`https://ui-avatars.com/api/?name=${s.fullName}&background=random`,alt:`Avatar`,className:`rounded-full`})})})]})]}),(0,O.jsx)(`main`,{className:`p-4 lg:p-8 overflow-x-hidden`,children:(0,O.jsx)(m,{context:{config:x}})})]})]}):(0,O.jsxs)(`div`,{className:`flex min-h-screen bg-slate-50 text-slate-900`,children:[k&&(0,O.jsx)(`div`,{className:`fixed inset-0 bg-black/50 z-20 lg:hidden`,onClick:()=>j(!1)}),(0,O.jsxs)(`aside`,{className:"fixed inset-y-0 left-0 z-30 w-64 bg-white border-r border-slate-200 overflow-y-auto transform transition-transform duration-300 ease-in-out ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} lg:translate-x-0",children:[(0,O.jsxs)(`div`,{className:`flex h-16 items-center justify-between px-6 border-b border-slate-100`,children:[(0,O.jsxs)(`div`,{className:`flex items-center`,children:[(0,O.jsx)(`div`,{className:`flex h-8 w-8 items-center justify-center rounded-lg bg-indigo-600 text-white font-bold text-sm shadow mr-3`,children:`YO`}),(0,O.jsx)(`span`,{className:`text-lg font-bold text-slate-800 tracking-tight truncate max-w-[120px]`,children:x?.company?.name||`YVO Admin`})]}),(0,O.jsx)(`button`,{onClick:()=>j(!1),className:`lg:hidden text-slate-400 hover:text-slate-600`,children:(0,O.jsx)(h,{size:24})})]}),(0,O.jsxs)(`nav`,{className:`mt-6 px-3 space-y-1`,children:[(0,O.jsx)(A,{icon:(0,O.jsx)(a,{size:20}),label:`Overview`,href:`/dashboard`,active:M.pathname===`/dashboard`}),(0,O.jsx)(`div`,{className:`pt-4 pb-2`,children:(0,O.jsx)(`div`,{className:`px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider`,children:`Financials`})}),(0,O.jsx)(A,{icon:(0,O.jsx)(n,{size:20}),label:`Finance`,href:`/dashboard/finance`,locked:!x?.modules?.finance}),(0,O.jsx)(A,{icon:(0,O.jsx)(i,{size:20}),label:`Invoicing`,href:`/dashboard/invoicing`,locked:!x?.modules?.invoicing}),(0,O.jsx)(A,{icon:(0,O.jsx)(e,{size:20}),label:`Inventory`,href:`/dashboard/inventory`,locked:!x?.modules?.inventory}),(0,O.jsx)(A,{icon:(0,O.jsx)(u,{size:20}),label:`Employees`,locked:!x?.modules?.employees,active:M.pathname.includes(`/dashboard/employees`)||M.pathname.includes(`/dashboard/leaves`)||M.pathname.includes(`/dashboard/payroll`),subItems:[{label:`All Employees`,href:`/dashboard/employees`,active:M.pathname===`/dashboard/employees`},{label:`Leaves`,href:`/dashboard/leaves`,active:M.pathname===`/dashboard/leaves`},{label:`Payroll`,href:`/dashboard/payroll`,active:M.pathname===`/dashboard/payroll`}]}),(0,O.jsx)(A,{icon:(0,O.jsx)(t,{size:20}),label:`Calendar`,href:`/dashboard/calendar`,locked:!x?.modules?.calendar}),(0,O.jsx)(A,{icon:(0,O.jsx)(e,{size:20}),label:`Broadcasts`,href:`/dashboard/broadcasts`,locked:!x?.modules?.broadcasts}),(0,O.jsxs)(`div`,{className:`mt-6 border-t border-slate-100 pt-4`,children:[(0,O.jsx)(A,{icon:(0,O.jsx)(n,{size:20}),label:`Analytics`,href:`/dashboard/analytics`,locked:!x?.modules?.analytics}),(0,O.jsx)(A,{icon:(0,O.jsx)(r,{size:20}),label:`Backup & Reports`,href:`/dashboard/backup-reports`,active:M.pathname===`/dashboard/backup-reports`,locked:!x?.modules?.backup}),(0,O.jsx)(A,{icon:(0,O.jsx)(c,{size:20}),label:`Settings`,href:`/dashboard/settings`})]})]}),(0,O.jsxs)(`div`,{className:`mt-auto border-t border-slate-200 p-4`,children:[(0,O.jsxs)(`div`,{className:`mb-4 px-3 py-2 bg-slate-50 rounded-lg border border-slate-200`,children:[(0,O.jsx)(`div`,{className:`text-xs font-semibold text-slate-500 uppercase`,children:`Current Plan`}),(0,O.jsxs)(`div`,{className:`flex items-center justify-between mt-1`,children:[(0,O.jsx)(`span`,{className:`text-sm font-bold text-indigo-600`,children:x?.company?.plan}),(0,O.jsx)(`span`,{className:`h-2 w-2 rounded-full bg-green-500`})]})]}),(0,O.jsxs)(`button`,{onClick:N,className:`flex items-center gap-3 w-full px-3 py-2 text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors`,children:[(0,O.jsx)(o,{size:18}),`Logout`]})]})]}),(0,O.jsxs)(`div`,{className:`flex-1 lg:ml-64 flex flex-col min-w-0`,children:[(0,O.jsxs)(`header`,{className:`sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 h-16 flex items-center justify-between px-4 lg:px-8`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(`button`,{onClick:()=>j(!0),className:`lg:hidden p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-lg`,children:(0,O.jsx)(d,{size:24})}),(0,O.jsx)(`h2`,{className:`text-lg font-semibold text-slate-800 truncate`,children:M.pathname===`/dashboard`?`Overview`:M.pathname.split(`/`).pop().charAt(0).toUpperCase()+M.pathname.split(`/`).pop().slice(1)})]}),(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsxs)(`div`,{className:`text-sm text-right hidden md:block`,children:[(0,O.jsx)(`div`,{className:`font-medium text-slate-900`,children:s.fullName}),(0,O.jsx)(`div`,{className:`text-xs text-slate-500`,children:s.email})]}),(0,O.jsx)(`div`,{className:`h-10 w-10 rounded-full bg-slate-200 overflow-hidden border-2 border-white shadow-sm flex-shrink-0`,children:(0,O.jsx)(`img`,{src:"https://ui-avatars.com/api/?name=${user.fullName}",alt:`Profile`})})]})]}),(0,O.jsx)(`main`,{className:`p-4 lg:p-8 overflow-x-hidden`,children:C?(0,O.jsx)(`div`,{className:`animate-pulse`,children:`Loading...`}):(0,O.jsx)(m,{context:{config:x}})})]})]}):null}var A=({icon:e,label:t,href:n,active:r,subItems:i,locked:a})=>{let[o,c]=(0,D.useState)(r);(0,D.useEffect)(()=>{r&&c(!0)},[r]);let l=e=>{a&&(e.preventDefault(),x.error(`This feature is disabled by your company admin.`))};return i?(0,O.jsxs)(`div`,{className:`space-y-1`,children:[(0,O.jsxs)(`button`,{onClick:e=>{if(a){l(e);return}c(!o)},className:`flex items-center justify-between w-full px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 
            ${r?`bg-blue-50 text-blue-700 shadow-sm`:a?`text-slate-400 cursor-not-allowed hover:bg-slate-50`:`text-slate-600 hover:bg-slate-50 hover:text-slate-900`}`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(`span`,{className:r?`text-blue-600`:`text-slate-400 group-hover:text-slate-600`,children:e}),t,a&&(0,O.jsx)(s,{size:14,className:`ml-2 text-slate-400`})]}),!a&&(0,O.jsx)(w,{size:16,className:`transition-transform duration-200 ${o?`transform rotate-180`:``}`})]}),o&&!a&&(0,O.jsx)(`div`,{className:`pl-10 space-y-1`,children:i.map((e,t)=>(0,O.jsx)(p,{to:e.href,className:`block px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 
                  ${e.active?`text-blue-600 bg-blue-50/50`:`text-slate-500 hover:text-slate-900 hover:bg-slate-50`}`,children:e.label},t))})]}):(0,O.jsxs)(p,{to:n,onClick:l,className:`flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 
      ${r?`bg-blue-50 text-blue-700 shadow-sm`:a?`text-slate-400 cursor-not-allowed hover:bg-slate-50`:`text-slate-600 hover:bg-slate-50 hover:text-slate-900`}`,children:[(0,O.jsx)(`span`,{className:r?`text-blue-600`:`text-slate-400 group-hover:text-slate-600`,children:e}),t,a&&(0,O.jsx)(s,{size:14,className:`ml-auto text-slate-400`})]})};export{k as default};