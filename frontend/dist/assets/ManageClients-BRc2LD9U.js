import{t as e}from"./loader-circle-CekiQCzI.js";import{t}from"./plus-CEMkcid2.js";import{t as n}from"./trash-2-Eo-Zwxxt.js";import{c as r,n as i,r as a,u as o,w as s,y as c}from"./index-FG9feFxU.js";var l=r(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),u=s(c(),1),d=a();function f(){let[r,a]=(0,u.useState)([]),[s,c]=(0,u.useState)(!0),[f,p]=(0,u.useState)(!1),[m,h]=(0,u.useState)(``),[g,_]=(0,u.useState)(``);(0,u.useEffect)(()=>{v()},[]);let v=async()=>{try{a((await i.get(`/public/clients`)).data)}catch(e){console.error(`Error fetching clients:`,e),o.error(`Failed to load clients`)}finally{c(!1)}},y=e=>{let t=e.target.files[0];if(t){if(t.size>500*1024){o.error(`Image size too large. Please use an image under 500KB.`);return}let e=new FileReader;e.onloadend=()=>{_(e.result)},e.readAsDataURL(t)}},b=async e=>{if(e.preventDefault(),!m||!g){o.error(`Please provide both name and logo.`);return}p(!0);try{a([(await i.post(`/sa/clients`,{name:m,logoUrl:g})).data,...r]),h(``),_(``),o.success(`Client added successfully!`)}catch(e){console.error(`Error adding client:`,e),o.error(`Failed to add client.`)}finally{p(!1)}},x=async e=>{if(window.confirm(`Are you sure you want to delete this client?`))try{await i.delete(`/sa/clients/${e}`),a(r.filter(t=>t._id!==e)),o.success(`Client deleted.`)}catch(e){console.error(`Error deleting client:`,e),o.error(`Failed to delete client.`)}};return(0,d.jsxs)(`div`,{className:`max-w-5xl mx-auto space-y-8`,children:[(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`h1`,{className:`text-2xl font-bold text-slate-900`,children:`Manage Clients`}),(0,d.jsx)(`p`,{className:`text-slate-500`,children:`Add and remove client logos displayed on the homepage.`})]}),(0,d.jsxs)(`div`,{className:`bg-white p-6 rounded-2xl border border-slate-200 shadow-sm`,children:[(0,d.jsx)(`h3`,{className:`text-lg font-bold text-slate-900 mb-4`,children:`Add New Client`}),(0,d.jsxs)(`form`,{onSubmit:b,className:`flex flex-col md:flex-row gap-4 items-start md:items-end`,children:[(0,d.jsxs)(`div`,{className:`flex-1 w-full`,children:[(0,d.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Client Name`}),(0,d.jsx)(`input`,{type:`text`,value:m,onChange:e=>h(e.target.value),placeholder:`e.g. Acme Corp`,className:`w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all`})]}),(0,d.jsxs)(`div`,{className:`w-full md:w-auto`,children:[(0,d.jsx)(`label`,{className:`block text-sm font-medium text-slate-700 mb-1`,children:`Logo (Max 500KB)`}),(0,d.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer bg-slate-50 px-4 py-2 rounded-lg border border-slate-300 hover:bg-slate-100 transition-colors`,children:[(0,d.jsx)(l,{size:18,className:`text-slate-500`}),(0,d.jsx)(`span`,{className:`text-sm text-slate-600 truncate max-w-[150px]`,children:g?`Image Selected`:`Upload Logo`}),(0,d.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:y,className:`hidden`})]})]}),(0,d.jsxs)(`button`,{type:`submit`,disabled:f||!m||!g,className:`w-full md:w-auto px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2`,children:[f?(0,d.jsx)(e,{size:18,className:`animate-spin`}):(0,d.jsx)(t,{size:18}),`Add Client`]})]}),g&&(0,d.jsxs)(`div`,{className:`mt-4 p-4 bg-slate-50 rounded-xl border border-dashed border-slate-300 inline-block`,children:[(0,d.jsx)(`p`,{className:`text-xs text-slate-400 mb-2 font-medium uppercase tracking-wider`,children:`Preview`}),(0,d.jsx)(`img`,{src:g,alt:`Preview`,className:`h-12 object-contain`})]})]}),(0,d.jsxs)(`div`,{className:`bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden`,children:[(0,d.jsxs)(`div`,{className:`px-6 py-4 border-b border-slate-100 flex justify-between items-center`,children:[(0,d.jsx)(`h3`,{className:`text-lg font-bold text-slate-900`,children:`Existing Clients`}),(0,d.jsxs)(`span`,{className:`bg-slate-100 text-slate-600 text-xs font-bold px-2 py-1 rounded-full`,children:[r.length,` Clients`]})]}),s?(0,d.jsx)(`div`,{className:`p-8 text-center text-slate-500 animate-pulse`,children:`Loading clients...`}):r.length===0?(0,d.jsx)(`div`,{className:`p-12 text-center text-slate-400`,children:`No clients added yet. Add one above!`}):(0,d.jsx)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 p-6`,children:r.map(e=>(0,d.jsxs)(`div`,{className:`group relative bg-slate-50 rounded-xl p-4 border border-slate-200 flex flex-col items-center justify-center gap-3 hover:shadow-md transition-all`,children:[(0,d.jsx)(`div`,{className:`h-16 w-full flex items-center justify-center p-2 bg-white rounded-lg`,children:(0,d.jsx)(`img`,{src:e.logoUrl,alt:e.name,className:`max-h-full max-w-full object-contain grayscale group-hover:grayscale-0 transition-all duration-300`})}),(0,d.jsx)(`span`,{className:`text-sm font-medium text-slate-700`,children:e.name}),(0,d.jsx)(`button`,{onClick:()=>x(e._id),className:`absolute -top-2 -right-2 bg-red-100 text-red-600 p-1.5 rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:text-white transition-all shadow-sm`,title:`Delete Client`,children:(0,d.jsx)(n,{size:14})})]},e._id))})]})]})}export{f as default};